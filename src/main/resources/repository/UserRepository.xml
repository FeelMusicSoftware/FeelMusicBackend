<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="feelmusicbackend.demo.repository.UserRepository">
    <select id="getLastInsertId" resultType="java.lang.Integer">
        SELECT LAST_INSERT_ID()
    </select>

    <insert id="createUser" parameterType="feelmusicbackend.demo.repository.UserRepository">
        INSERT INTO user VALUES (null, #{idPerson}, #{username}, #{email}, #{password})
    </insert>



    <select id="findByUserId" resultType="feelmusicbackend.demo.repository.UserRepository">
        SELECT
            id_user as idUser,
            email as email
        FROM user
        WHERE
            id_user = #{idUser}
    </select>

    <update id="updateUser" parameterType="feelmusicbackend.demo.repository.UserRepository">
        UPDATE user SET
                        id_user=#{idUser}, password=#{password},email=#{email},status=1,tx_date=#{transaction.txDate},
                        tx_id_user=#{transaction.txIdUser},tx_host=#{transaction.txHost},tx_update=#{transaction.txUpdate}
        WHERE id_user=#{idUser} and
            status = 1 and
            id_rol = 2
    </update>
    <delete id="deleteUser" parameterType="feelmusicbackend.demo.repository.UserRepository">
        DELETE FROM user
        WHERE
            id_user=#{userId}
    </delete>
</mapper>